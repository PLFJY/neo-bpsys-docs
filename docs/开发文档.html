<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
      <title>neo-bpsys-wpf 开发文档 | neo-bpsys Docs </title>
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <meta name="title" content="neo-bpsys-wpf 开发文档 | neo-bpsys Docs ">
      
      
      <link rel="icon" href="../images/favicon.ico">
      <link rel="stylesheet" href="../public/docfx.min.css">
      <link rel="stylesheet" href="../public/main.css">
      <meta name="docfx:navrel" content="../toc.html">
      <meta name="docfx:tocrel" content="toc.html">
      
      <meta name="docfx:rel" content="../">
      
      
      <meta name="docfx:docurl" content="https://github.com/PLFJY/neo-bpsys-docs/blob/master/docs/开发文档.md/#L1">
      <meta name="loc:inThisArticle" content="In this article">
      <meta name="loc:searchResultsCount" content="{count} results for &quot;{query}&quot;">
      <meta name="loc:searchNoResults" content="No results for &quot;{query}&quot;">
      <meta name="loc:tocFilter" content="Filter by title">
      <meta name="loc:nextArticle" content="Next">
      <meta name="loc:prevArticle" content="Previous">
      <meta name="loc:themeLight" content="Light">
      <meta name="loc:themeDark" content="Dark">
      <meta name="loc:themeAuto" content="Auto">
      <meta name="loc:changeTheme" content="Change theme">
      <meta name="loc:copy" content="Copy">
      <meta name="loc:downloadPdf" content="Download PDF">

      <script type="module" src="./../public/docfx.min.js"></script>

      <script>
        const theme = localStorage.getItem('theme') || 'auto'
        document.documentElement.setAttribute('data-bs-theme', theme === 'auto' ? (window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light') : theme)
      </script>

  </head>

  <body class="tex2jax_ignore" data-layout="" data-yaml-mime="">
    <header class="bg-body border-bottom">
      <nav id="autocollapse" class="navbar navbar-expand-md" role="navigation">
        <div class="container-xxl flex-nowrap">
          <a class="navbar-brand" href="../index.html">
            <img id="logo" class="svg" src="../images/favicon.ico" alt="neo-bpsys-wpf">
            neo-bpsys-wpf
          </a>
          <button class="btn btn-lg d-md-none border-0" type="button" data-bs-toggle="collapse" data-bs-target="#navpanel" aria-controls="navpanel" aria-expanded="false" aria-label="Toggle navigation">
            <i class="bi bi-three-dots"></i>
          </button>
          <div class="collapse navbar-collapse" id="navpanel">
            <div id="navbar">
              <form class="search" role="search" id="search">
                <i class="bi bi-search"></i>
                <input class="form-control" id="search-query" type="search" disabled placeholder="Search" autocomplete="off" aria-label="Search">
              </form>
            </div>
          </div>
        </div>
      </nav>
    </header>

    <main class="container-xxl">
      <div class="toc-offcanvas">
        <div class="offcanvas-md offcanvas-start" tabindex="-1" id="tocOffcanvas" aria-labelledby="tocOffcanvasLabel">
          <div class="offcanvas-header">
            <h5 class="offcanvas-title" id="tocOffcanvasLabel">Table of Contents</h5>
            <button type="button" class="btn-close" data-bs-dismiss="offcanvas" data-bs-target="#tocOffcanvas" aria-label="Close"></button>
          </div>
          <div class="offcanvas-body">
            <nav class="toc" id="toc"></nav>
          </div>
        </div>
      </div>

      <div class="content">
        <div class="actionbar">
          <button class="btn btn-lg border-0 d-md-none" type="button" data-bs-toggle="offcanvas" data-bs-target="#tocOffcanvas" aria-controls="tocOffcanvas" aria-expanded="false" aria-label="Show table of contents">
            <i class="bi bi-list"></i>
          </button>

          <nav id="breadcrumb"></nav>
        </div>

        <article data-uid="">
<h1 id="neo-bpsys-wpf-开发文档">neo-bpsys-wpf 开发文档</h1>

<h2 id="软件框架和技术栈">软件框架和技术栈：</h2>
<p>框架：.Net 9.0.4 WPF</p>
<p>UI库：<a href="https://wpfui.lepo.co/">WPF-UI</a></p>
<p>IOC容器：<a href="https://learn.microsoft.com/zh-cn/dotnet/core/extensions/dependency-injection-usage">Microsoft.Extensions.DependencyInjection</a></p>
<p>拼音库：<a href="https://gitee.com/hyjiacan/Pinyin4Net">hyjiacan.pinyin4net</a></p>
<p>MVVM部分：<a href="https://learn.microsoft.com/zh-cn/dotnet/communitytoolkit/mvvm/">CommunityToolkit.Mvvm</a></p>
<p>下载器: <a href="https://github.com/bezzad/Downloader">Downloader</a></p>
<h2 id="开发工具">开发工具</h2>
<p>Visual Studio 2022、Jetbrains Rider，使用Rider时提交需排除.idea文件夹</p>
<h3 id="ide插件需要">IDE插件需要</h3>
<p>Xaml Styler</p>
<h2 id="命名规范">命名规范</h2>
<p>类Class、属性Property、方法Mothods 统一采用大驼峰命名法upper camel case</p>
<p>字段Field 统一采用_+小驼峰命名法lower camel case</p>
<h3 id="与游戏名词相关的术语">与游戏名词相关的术语</h3>
<table>
<thead>
<tr>
<th>Ban</th>
<th>禁用</th>
</tr>
</thead>
<tbody>
<tr>
<td>Pick</td>
<td>选择</td>
</tr>
<tr>
<td>Sur</td>
<td>求生者</td>
</tr>
<tr>
<td>Hun</td>
<td>监管者</td>
</tr>
<tr>
<td>Camp</td>
<td>阵营</td>
</tr>
<tr>
<td>Talent</td>
<td>天赋</td>
</tr>
<tr>
<td>Trait</td>
<td>辅助特质</td>
</tr>
<tr>
<td>Game</td>
<td>对局，单独出现时是单个游戏对局，在GameProgress中是指一个回合</td>
</tr>
<tr>
<td>Character/Chara</td>
<td>角色</td>
</tr>
<tr>
<td>Map</td>
<td>地图</td>
</tr>
<tr>
<td>GameProgress</td>
<td>对局进度，如Game1FirstHalf 第一局上半场</td>
</tr>
<tr>
<td>Team</td>
<td>队伍</td>
</tr>
<tr>
<td>Main</td>
<td>主队</td>
</tr>
<tr>
<td>Away</td>
<td>客队</td>
</tr>
<tr>
<td>Member</td>
<td>队伍成员</td>
</tr>
<tr>
<td>Player</td>
<td>选手（包含Member）</td>
</tr>
<tr>
<td>OnField</td>
<td>已上场</td>
</tr>
<tr>
<td>Score</td>
<td>比分</td>
</tr>
<tr>
<td>Win</td>
<td>胜</td>
</tr>
<tr>
<td>Lose</td>
<td>负（前台的好像用不着了）</td>
</tr>
<tr>
<td>Tie</td>
<td>平</td>
</tr>
<tr>
<td>MinorPoint</td>
<td>小比分</td>
</tr>
<tr>
<td>MajorPoint</td>
<td>大比分</td>
</tr>
<tr>
<td>Front</td>
<td>前台（bp展示界面）</td>
</tr>
<tr>
<td>Interlude</td>
<td>过场画面，展示阵容和天赋</td>
</tr>
<tr>
<td>GameData</td>
<td>赛后数据</td>
</tr>
</tbody>
</table>
<p>禁用Ban的部分统一采用动词在前如BanHun（禁用监管者），其余均为名词在前的命名比如（SurPick求生者选择）</p>
<h2 id="commit-提交规范">Commit 提交规范</h2>
<p>类型(作用域):</p>
<p>内容，如果是bug fix，说明解决方案</p>
<p>类型和作用域可以有多个，逗号+空格隔开，可以只写对应功能Page/Window的名称或者对应模块的名称，如：BanHunPage、DesignMode</p>
<p>Example:</p>
<p>refactor(Timer, DesignMode):</p>
<p>计时器获取改为Messenger通知改变，IsDesignMode变化由原来的事件通知改为Messenger通知</p>
<table>
<thead>
<tr>
<th>类型</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>feature</td>
<td>新功能</td>
</tr>
<tr>
<td>fix</td>
<td>修复bug</td>
</tr>
<tr>
<td>refactor</td>
<td>重构</td>
</tr>
<tr>
<td>docs</td>
<td>改文档，例如README</td>
</tr>
<tr>
<td>style</td>
<td>代码风格改变，不影响功能</td>
</tr>
<tr>
<td>temp</td>
<td>临时提交，用于合作开发</td>
</tr>
<tr>
<td>chore</td>
<td>杂项，例如.gitignore、github workflow</td>
</tr>
<tr>
<td>build</td>
<td>更改构建脚本、构建工具</td>
</tr>
<tr>
<td>revert</td>
<td>回滚</td>
</tr>
<tr>
<td>merge</td>
<td>合并</td>
</tr>
<tr>
<td>improve</td>
<td>提升</td>
</tr>
</tbody>
</table>
<h2 id="版本号迭代原则">版本号迭代原则</h2>
<p>首位仅在出现大型重构或又非常重大更改时（如官方规则改变、UI重构）才会跟进</p>
<p>第二位出现重大的新Module更新/第三位满十才会跟进</p>
<p>第三位是有新Feature就会跟进</p>
<p>最后一位自动生成，用于BugFix和Improvement版本，不用手动迭代</p>
<h2 id="仓库分支管理流程规范">仓库分支管理流程规范</h2>
<h3 id="1-分支结构说明">1. 分支结构说明</h3>
<p>• main 分支：主分支，存放稳定发布版本，仅通过 PR 合并更新</p>
<p>• dev 分支：开发主分支，存放最新开发代码，基于 main 分支创建</p>
<p>• feature 分支：功能开发分支，基于 dev 分支创建，开发完成后合并至 dev</p>
<h3 id="2-主版本更新流程dev-合并至-main">2. 主版本更新流程（dev 合并至 main）</h3>
<h4 id="21-提交-pr-合并-dev-到-main">2.1. 提交 PR 合并 dev 到 main</h4>
<ul>
<li>在 GitHub 上创建从 dev 到 main 的合并请求（PR）</li>
<li>确保 PR 通过代码审查后，点击 Merge pull request 合并</li>
<li>合并方式选择 Create a merge commit（默认方式）</li>
</ul>
<h4 id="22-自动同步-dev-分支">2.2. 自动同步 dev 分支</h4>
<ul>
<li>PR 合并后，GitHub Action 自动触发以下操作：
git checkout dev &amp;&amp; git rebase main</li>
<li>（注：此步骤由 CI 工具自动完成，无需手动操作）</li>
</ul>
<h4 id="23-本地更新-dev-分支">2.3. 本地更新 dev 分支</h4>
<ul>
<li>本地切换到 dev 分支：</li>
</ul>
<pre><code>git checkout dev git pull  # 拉取远程 dev 分支（已自动 rebase 到 main）
</code></pre>
<ul>
<li>继续在 dev 上进行后续开发</li>
</ul>
<h3 id="3-小-bug-修复流程直接在-dev-上修改">3. 小 bug 修复流程（直接在 dev 上修改）</h3>
<h4 id="31-更新本地-dev-分支">3.1. 更新本地 dev 分支</h4>
<pre><code>git checkout dev
git pull --rebase  # 拉取远程更新并变基，保持本地分支整洁
</code></pre>
<h4 id="32-修复-bug-并提交">3.2. 修复 bug 并提交</h4>
<ul>
<li>修改代码</li>
<li>提交</li>
</ul>
<pre><code>git add . git commit -m &quot;fix: 修复具体 bug 描述&quot;
</code></pre>
<h4 id="33-推送到远程-dev-分支">3.3. 推送到远程 dev 分支</h4>
<pre><code>git push origin dev
</code></pre>
<h3 id="4-新功能开发流程基于-feature-分支开发">4. 新功能开发流程（基于 feature 分支开发）</h3>
<h4 id="41-在-microsoft-todo-上新增条目并分配给自己">4.1. 在 Microsoft Todo 上新增条目并分配给自己</h4>
<h4 id="42-拉取最新-dev-分支">4.2. 拉取最新 dev 分支</h4>
<pre><code>git checkout dev
git pull --rebase
</code></pre>
<h4 id="43-创建-feature-分支">4.3. 创建 feature 分支</h4>
<pre><code>git checkout -b feature/功能名称
</code></pre>
<h4 id="44-开发功能并提交">4.4. 开发功能并提交</h4>
<p>开发过程中可多次提交，提交信息需清晰描述改动：</p>
<pre><code>git add .
git commit -m &quot;feat: 功能模块-具体功能描述&quot;
</code></pre>
<h4 id="45-同步最新-dev-分支">4.5. 同步最新 dev 分支</h4>
<pre><code>git checkout dev
git pull --rebase
git checkout feature/功能名称
git rebase dev  # 将 feature 分支变基到最新 dev，解决冲突
</code></pre>
<h4 id="46-压缩提交并合并到-dev">4.6. 压缩提交并合并到 dev</h4>
<p>压缩 feature 分支的所有提交为一个 commit</p>
<pre><code>git checkout dev
git merge --squash feature/功能名称
git commit -m &quot;feat: 完整功能描述&quot;  # 编写统一的提交信息
</code></pre>
<h4 id="47-推送到远程-dev-分支并清理">4.7. 推送到远程 dev 分支并清理</h4>
<pre><code>git push origin dev
git branch -d feature/功能名称  # 删除本地 feature 分支
git push origin --delete feature/功能名称  # 删除远程 feature 分支
</code></pre>
<h4 id="48-在-microsoft-todo-上勾选对应完成的-feature">4.8. 在 Microsoft Todo 上勾选对应完成的 feature</h4>
<h3 id="5-注意事项">5. 注意事项</h3>
<h4 id="51-提交规范">5.1. 提交规范</h4>
<ul>
<li>使用语义化提交格式（如 feat:、fix:、docs: 等前缀）</li>
<li>提交信息需清晰描述改动目的，避免模糊表述</li>
</ul>
<h4 id="52-分支维护">5.2. 分支维护</h4>
<ul>
<li>dev 分支需定期与 main 同步（通过主版本更新流程自动完成）</li>
<li>废弃的 feature 分支需及时删除，保持仓库整洁</li>
</ul>
<h4 id="53-冲突处理">5.3. 冲突处理</h4>
<ul>
<li>变基（rebase）过程中遇到冲突时，需手动解决后执行 git rebase --continue</li>
<li>合并（merge）时优先使用变基方式，保持线性提交历史</li>
</ul>

</article>

        <div class="contribution d-print-none">
          <a href="https://github.com/PLFJY/neo-bpsys-docs/blob/master/docs/开发文档.md/#L1" class="edit-link">Edit this page</a>
        </div>

        <div class="next-article d-print-none border-top" id="nextArticle"></div>

      </div>

      <div class="affix">
        <nav id="affix"></nav>
      </div>
    </main>

    <div class="container-xxl search-results" id="search-results"></div>

    <footer class="border-top text-secondary">
      <div class="container-xxl">
        <div class="flex-fill">
          <span>Made with <a href="https://dotnet.github.io/docfx">docfx</a></span>
        </div>
      </div>
    </footer>
  </body>
</html>
